/*
 * Copyright (C) 2015 Matt Kilgore
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License v2 as published by the
 * Free Software Foundation.
 */

#include <protura/types.h>
#include <protura/debug.h>
#include <protura/string.h>

#include <protura/drivers/keyboard.h>

#define ESC 0x1B
#define DEL 0x7F

const char *keycode_str_table[KEY_STR_MAX] = {
    [KEY_STR_F1] = "\x1B[[A",
    [KEY_STR_F2] = "\x1B[[B",
    [KEY_STR_F3] = "\x1B[[C",
    [KEY_STR_F4] = "\x1B[[D",
    [KEY_STR_F5] = "\x1B[[E",
    [KEY_STR_F6] = "\x1B[17~",
    [KEY_STR_F7] = "\x1B[18~",
    [KEY_STR_F8] = "\x1B[19~",
    [KEY_STR_F9] = "\x1B[20~",
    [KEY_STR_F10] = "\x1B[21~",
    [KEY_STR_F11] = "\x1B[23~",
    [KEY_STR_F12] = "\x1B[24~",
    [KEY_STR_INSERT] = "\x1B[2~",
    [KEY_STR_DELETE] = "\x1B[3~",
    [KEY_STR_HOME] = "\x1B[1~",
    [KEY_STR_END] = "\x1B[4~",
    [KEY_STR_PAGE_UP] = "\x1B[5~",
    [KEY_STR_PAGE_DOWN] = "\x1B[6~",
};

static struct keycode reg_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '1'),
    [KS_TWO]          = KC(KT_REG, '2'),
    [KS_THREE]        = KC(KT_REG, '3'),
    [KS_FOUR]         = KC(KT_REG, '4'),
    [KS_FIVE]         = KC(KT_REG, '5'),
    [KS_SIX]          = KC(KT_REG, '6'),
    [KS_SEVEN]        = KC(KT_REG, '7'),
    [KS_EIGHT]        = KC(KT_REG, '8'),
    [KS_NINE]         = KC(KT_REG, '9'),
    [KS_ZERO]         = KC(KT_REG, '0'),
    [KS_MINUS]        = KC(KT_REG, '-'),
    [KS_EQUALS]       = KC(KT_REG, '='),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(KT_REG, '\t'),
    [KS_Q]            = KC(KT_LETTER, 'q'),
    [KS_W]            = KC(KT_LETTER, 'w'),
    [KS_E]            = KC(KT_LETTER, 'e'),
    [KS_R]            = KC(KT_LETTER, 'r'),
    [KS_T]            = KC(KT_LETTER, 't'),
    [KS_Y]            = KC(KT_LETTER, 'y'),
    [KS_U]            = KC(KT_LETTER, 'u'),
    [KS_I]            = KC(KT_LETTER, 'i'),
    [KS_O]            = KC(KT_LETTER, 'o'),
    [KS_P]            = KC(KT_LETTER, 'p'),
    [KS_LEFT_BRACE]   = KC(KT_REG, '['),
    [KS_RIGHT_BRACE]  = KC(KT_REG, ']'),
    [KS_ENTER]        = KC(KT_REG, '\n'),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_LETTER, 'a'),
    [KS_S]            = KC(KT_LETTER, 's'),
    [KS_D]            = KC(KT_LETTER, 'd'),
    [KS_F]            = KC(KT_LETTER, 'f'),
    [KS_G]            = KC(KT_LETTER, 'g'),
    [KS_H]            = KC(KT_LETTER, 'h'),
    [KS_J]            = KC(KT_LETTER, 'j'),
    [KS_K]            = KC(KT_LETTER, 'k'),
    [KS_L]            = KC(KT_LETTER, 'l'),
    [KS_SEMICOLON]    = KC(KT_REG, ';'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '\''),
    [KS_BACKTICK]     = KC(KT_REG, '`'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, '\\'),
    [KS_Z]            = KC(KT_LETTER, 'z'),
    [KS_X]            = KC(KT_LETTER, 'x'),
    [KS_C]            = KC(KT_LETTER, 'c'),
    [KS_V]            = KC(KT_LETTER, 'v'),
    [KS_B]            = KC(KT_LETTER, 'b'),
    [KS_N]            = KC(KT_LETTER, 'n'),
    [KS_M]            = KC(KT_LETTER, 'm'),
    [KS_COMMA]        = KC(KT_REG, ','),
    [KS_PERIOD]       = KC(KT_REG, '.'),
    [KS_SLASH]        = KC(KT_REG, '/'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),

    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode shift_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '!'),
    [KS_TWO]          = KC(KT_REG, '@'),
    [KS_THREE]        = KC(KT_REG, '#'),
    [KS_FOUR]         = KC(KT_REG, '$'),
    [KS_FIVE]         = KC(KT_REG, '%'),
    [KS_SIX]          = KC(KT_REG, '^'),
    [KS_SEVEN]        = KC(KT_REG, '&'),
    [KS_EIGHT]        = KC(KT_REG, '*'),
    [KS_NINE]         = KC(KT_REG, '('),
    [KS_ZERO]         = KC(KT_REG, ')'),
    [KS_MINUS]        = KC(KT_REG, '_'),
    [KS_EQUALS]       = KC(KT_REG, '+'),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_LETTER, 'Q'),
    [KS_W]            = KC(KT_LETTER, 'W'),
    [KS_E]            = KC(KT_LETTER, 'E'),
    [KS_R]            = KC(KT_LETTER, 'R'),
    [KS_T]            = KC(KT_LETTER, 'T'),
    [KS_Y]            = KC(KT_LETTER, 'Y'),
    [KS_U]            = KC(KT_LETTER, 'U'),
    [KS_I]            = KC(KT_LETTER, 'I'),
    [KS_O]            = KC(KT_LETTER, 'O'),
    [KS_P]            = KC(KT_LETTER, 'P'),
    [KS_LEFT_BRACE]   = KC(KT_REG, '{'),
    [KS_RIGHT_BRACE]  = KC(KT_REG, '}'),
    [KS_ENTER]        = KC(KT_REG, '\n'),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_LETTER, 'A'),
    [KS_S]            = KC(KT_LETTER, 'S'),
    [KS_D]            = KC(KT_LETTER, 'D'),
    [KS_F]            = KC(KT_LETTER, 'F'),
    [KS_G]            = KC(KT_LETTER, 'G'),
    [KS_H]            = KC(KT_LETTER, 'H'),
    [KS_J]            = KC(KT_LETTER, 'J'),
    [KS_K]            = KC(KT_LETTER, 'K'),
    [KS_L]            = KC(KT_LETTER, 'L'),
    [KS_SEMICOLON]    = KC(KT_REG, ':'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '"'),
    [KS_BACKTICK]     = KC(KT_REG, '~'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, '|'),
    [KS_Z]            = KC(KT_LETTER, 'Z'),
    [KS_X]            = KC(KT_LETTER, 'X'),
    [KS_C]            = KC(KT_LETTER, 'C'),
    [KS_V]            = KC(KT_LETTER, 'V'),
    [KS_B]            = KC(KT_LETTER, 'B'),
    [KS_N]            = KC(KT_LETTER, 'N'),
    [KS_M]            = KC(KT_LETTER, 'M'),
    [KS_COMMA]        = KC(KT_REG, '<'),
    [KS_PERIOD]       = KC(KT_REG, '>'),
    [KS_SLASH]        = KC(KT_REG, '?'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(0, 0),
    [KS_F2]           = KC(0, 0),
    [KS_F3]           = KC(0, 0),
    [KS_F4]           = KC(0, 0),
    [KS_F5]           = KC(0, 0),
    [KS_F6]           = KC(0, 0),
    [KS_F7]           = KC(0, 0),
    [KS_F8]           = KC(0, 0),
    [KS_F9]           = KC(0, 0),
    [KS_F10]          = KC(0, 0),
    [KS_F11]          = KC(0, 0),
    [KS_F12]          = KC(0, 0),

    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode ctrl_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(0, 0),
    [KS_TWO]          = KC(0, 0),
    [KS_THREE]        = KC(0, 0),
    [KS_FOUR]         = KC(0, 0),
    [KS_FIVE]         = KC(0, 0),
    [KS_SIX]          = KC(0, 0),
    [KS_SEVEN]        = KC(0, 0),
    [KS_EIGHT]        = KC(0, 0),
    [KS_NINE]         = KC(0, 0),
    [KS_ZERO]         = KC(0, 0),
    [KS_MINUS]        = KC(KT_REG, 0x1F),
    [KS_EQUALS]       = KC(KT_REG, 0),
    [KS_BACKSPACE]    = KC(KT_REG, '\b'),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_REG, 0x11),
    [KS_W]            = KC(KT_REG, 0x17),
    [KS_E]            = KC(KT_REG, 0x05),
    [KS_R]            = KC(KT_REG, 0x12),
    [KS_T]            = KC(KT_REG, 0x14),
    [KS_Y]            = KC(KT_REG, 0x19),
    [KS_U]            = KC(KT_REG, 0x15),
    [KS_I]            = KC(KT_REG, 0x09),
    [KS_O]            = KC(KT_REG, 0x0F),
    [KS_P]            = KC(KT_REG, 0x10),
    [KS_LEFT_BRACE]   = KC(KT_REG, 0x1B),
    [KS_RIGHT_BRACE]  = KC(KT_REG, 0x1D),
    [KS_ENTER]        = KC(KT_REG, 0x0D),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_REG, 0x01),
    [KS_S]            = KC(KT_REG, 0x13),
    [KS_D]            = KC(KT_REG, 0x04),
    [KS_F]            = KC(KT_REG, 0x06),
    [KS_G]            = KC(KT_REG, 0x07),
    [KS_H]            = KC(KT_REG, 0x08),
    [KS_J]            = KC(KT_REG, 0x0A),
    [KS_K]            = KC(KT_REG, 0x0B),
    [KS_L]            = KC(KT_REG, 0x0C),
    [KS_SEMICOLON]    = KC(KT_REG, 0),
    [KS_SINGLE_QUOTE] = KC(KT_REG, 0),
    [KS_BACKTICK]     = KC(KT_REG, 0),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, 0x1C),
    [KS_Z]            = KC(KT_REG, 0x1A),
    [KS_X]            = KC(KT_REG, 0x18),
    [KS_C]            = KC(KT_REG, 0x03),
    [KS_V]            = KC(KT_REG, 0x16),
    [KS_B]            = KC(KT_REG, 0x02),
    [KS_N]            = KC(KT_REG, 0x0E),
    [KS_M]            = KC(KT_REG, 0x0D),
    [KS_COMMA]        = KC(KT_REG, 0),
    [KS_PERIOD]       = KC(KT_REG, 0),
    [KS_SLASH]        = KC(KT_REG, 0),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),
    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode shift_ctrl_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '!'),
    [KS_TWO]          = KC(KT_REG, '@'),
    [KS_THREE]        = KC(KT_REG, '#'),
    [KS_FOUR]         = KC(KT_REG, '$'),
    [KS_FIVE]         = KC(KT_REG, '%'),
    [KS_SIX]          = KC(KT_REG, '^'),
    [KS_SEVEN]        = KC(KT_REG, '&'),
    [KS_EIGHT]        = KC(KT_REG, '*'),
    [KS_NINE]         = KC(KT_REG, '('),
    [KS_ZERO]         = KC(KT_REG, ')'),
    [KS_MINUS]        = KC(KT_REG, '_'),
    [KS_EQUALS]       = KC(KT_REG, '+'),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(0, 0),
    [KS_MINUS]        = KC(KT_REG, 0x1F),
    [KS_EQUALS]       = KC(KT_REG, 0),
    [KS_BACKSPACE]    = KC(KT_REG, '\b'),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_REG, 0x11),
    [KS_W]            = KC(KT_REG, 0x17),
    [KS_E]            = KC(KT_REG, 0x05),
    [KS_R]            = KC(KT_REG, 0x12),
    [KS_T]            = KC(KT_REG, 0x14),
    [KS_Y]            = KC(KT_REG, 0x19),
    [KS_U]            = KC(KT_REG, 0x15),
    [KS_I]            = KC(KT_REG, 0x09),
    [KS_O]            = KC(KT_REG, 0x0F),
    [KS_P]            = KC(KT_REG, 0x10),
    [KS_LEFT_BRACE]   = KC(KT_REG, 0x1B),
    [KS_RIGHT_BRACE]  = KC(KT_REG, 0x1D),
    [KS_ENTER]        = KC(KT_REG, 0x0D),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_REG, 0x01),
    [KS_S]            = KC(KT_REG, 0x13),
    [KS_D]            = KC(KT_REG, 0x04),
    [KS_F]            = KC(KT_REG, 0x06),
    [KS_G]            = KC(KT_REG, 0x07),
    [KS_H]            = KC(KT_REG, 0x08),
    [KS_J]            = KC(KT_REG, 0x0A),
    [KS_K]            = KC(KT_REG, 0x0B),
    [KS_L]            = KC(KT_REG, 0x0C),
    [KS_SEMICOLON]    = KC(KT_REG, ':'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '"'),
    [KS_BACKTICK]     = KC(KT_REG, '~'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, 0x1C),
    [KS_Z]            = KC(KT_REG, 0x1A),
    [KS_X]            = KC(KT_REG, 0x18),
    [KS_C]            = KC(KT_REG, 0x03),
    [KS_V]            = KC(KT_REG, 0x16),
    [KS_B]            = KC(KT_REG, 0x02),
    [KS_N]            = KC(KT_REG, 0x0E),
    [KS_M]            = KC(KT_REG, 0x0D),
    [KS_COMMA]        = KC(KT_REG, '<'),
    [KS_PERIOD]       = KC(KT_REG, '>'),
    [KS_SLASH]        = KC(KT_REG, '?'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),
    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode alt_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '1'),
    [KS_TWO]          = KC(KT_REG, '2'),
    [KS_THREE]        = KC(KT_REG, '3'),
    [KS_FOUR]         = KC(KT_REG, '4'),
    [KS_FIVE]         = KC(KT_REG, '5'),
    [KS_SIX]          = KC(KT_REG, '6'),
    [KS_SEVEN]        = KC(KT_REG, '7'),
    [KS_EIGHT]        = KC(KT_REG, '8'),
    [KS_NINE]         = KC(KT_REG, '9'),
    [KS_ZERO]         = KC(KT_REG, '0'),
    [KS_MINUS]        = KC(KT_REG, '-'),
    [KS_EQUALS]       = KC(KT_REG, '='),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(KT_REG, '\t'),
    [KS_Q]            = KC(KT_LETTER, 'q'),
    [KS_W]            = KC(KT_LETTER, 'w'),
    [KS_E]            = KC(KT_LETTER, 'e'),
    [KS_R]            = KC(KT_LETTER, 'r'),
    [KS_T]            = KC(KT_LETTER, 't'),
    [KS_Y]            = KC(KT_LETTER, 'y'),
    [KS_U]            = KC(KT_LETTER, 'u'),
    [KS_I]            = KC(KT_LETTER, 'i'),
    [KS_O]            = KC(KT_LETTER, 'o'),
    [KS_P]            = KC(KT_LETTER, 'p'),
    [KS_LEFT_BRACE]   = KC(KT_REG, '['),
    [KS_RIGHT_BRACE]  = KC(KT_REG, ']'),
    [KS_ENTER]        = KC(KT_REG, '\n'),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_LETTER, 'a'),
    [KS_S]            = KC(KT_LETTER, 's'),
    [KS_D]            = KC(KT_LETTER, 'd'),
    [KS_F]            = KC(KT_LETTER, 'f'),
    [KS_G]            = KC(KT_LETTER, 'g'),
    [KS_H]            = KC(KT_LETTER, 'h'),
    [KS_J]            = KC(KT_LETTER, 'j'),
    [KS_K]            = KC(KT_LETTER, 'k'),
    [KS_L]            = KC(KT_LETTER, 'l'),
    [KS_SEMICOLON]    = KC(KT_REG, ';'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '\''),
    [KS_BACKTICK]     = KC(KT_REG, '`'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, '\\'),
    [KS_Z]            = KC(KT_LETTER, 'z'),
    [KS_X]            = KC(KT_LETTER, 'x'),
    [KS_C]            = KC(KT_LETTER, 'c'),
    [KS_V]            = KC(KT_LETTER, 'v'),
    [KS_B]            = KC(KT_LETTER, 'b'),
    [KS_N]            = KC(KT_LETTER, 'n'),
    [KS_M]            = KC(KT_LETTER, 'm'),
    [KS_COMMA]        = KC(KT_REG, ','),
    [KS_PERIOD]       = KC(KT_REG, '.'),
    [KS_SLASH]        = KC(KT_REG, '/'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),

    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode alt_shift_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '!'),
    [KS_TWO]          = KC(KT_REG, '@'),
    [KS_THREE]        = KC(KT_REG, '#'),
    [KS_FOUR]         = KC(KT_REG, '$'),
    [KS_FIVE]         = KC(KT_REG, '%'),
    [KS_SIX]          = KC(KT_REG, '^'),
    [KS_SEVEN]        = KC(KT_REG, '&'),
    [KS_EIGHT]        = KC(KT_REG, '*'),
    [KS_NINE]         = KC(KT_REG, '('),
    [KS_ZERO]         = KC(KT_REG, ')'),
    [KS_MINUS]        = KC(KT_REG, '_'),
    [KS_EQUALS]       = KC(KT_REG, '+'),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_LETTER, 'Q'),
    [KS_W]            = KC(KT_LETTER, 'W'),
    [KS_E]            = KC(KT_LETTER, 'E'),
    [KS_R]            = KC(KT_LETTER, 'R'),
    [KS_T]            = KC(KT_LETTER, 'T'),
    [KS_Y]            = KC(KT_LETTER, 'Y'),
    [KS_U]            = KC(KT_LETTER, 'U'),
    [KS_I]            = KC(KT_LETTER, 'I'),
    [KS_O]            = KC(KT_LETTER, 'O'),
    [KS_P]            = KC(KT_LETTER, 'P'),
    [KS_LEFT_BRACE]   = KC(KT_REG, '{'),
    [KS_RIGHT_BRACE]  = KC(KT_REG, '}'),
    [KS_ENTER]        = KC(KT_REG, '\n'),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_LETTER, 'A'),
    [KS_S]            = KC(KT_LETTER, 'S'),
    [KS_D]            = KC(KT_LETTER, 'D'),
    [KS_F]            = KC(KT_LETTER, 'F'),
    [KS_G]            = KC(KT_LETTER, 'G'),
    [KS_H]            = KC(KT_LETTER, 'H'),
    [KS_J]            = KC(KT_LETTER, 'J'),
    [KS_K]            = KC(KT_LETTER, 'K'),
    [KS_L]            = KC(KT_LETTER, 'L'),
    [KS_SEMICOLON]    = KC(KT_REG, ':'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '"'),
    [KS_BACKTICK]     = KC(KT_REG, '~'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, '|'),
    [KS_Z]            = KC(KT_LETTER, 'Z'),
    [KS_X]            = KC(KT_LETTER, 'X'),
    [KS_C]            = KC(KT_LETTER, 'C'),
    [KS_V]            = KC(KT_LETTER, 'V'),
    [KS_B]            = KC(KT_LETTER, 'B'),
    [KS_N]            = KC(KT_LETTER, 'N'),
    [KS_M]            = KC(KT_LETTER, 'M'),
    [KS_COMMA]        = KC(KT_REG, '<'),
    [KS_PERIOD]       = KC(KT_REG, '>'),
    [KS_SLASH]        = KC(KT_REG, '?'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(0, 0),
    [KS_F2]           = KC(0, 0),
    [KS_F3]           = KC(0, 0),
    [KS_F4]           = KC(0, 0),
    [KS_F5]           = KC(0, 0),
    [KS_F6]           = KC(0, 0),
    [KS_F7]           = KC(0, 0),
    [KS_F8]           = KC(0, 0),
    [KS_F9]           = KC(0, 0),
    [KS_F10]          = KC(0, 0),
    [KS_F11]          = KC(0, 0),
    [KS_F12]          = KC(0, 0),

    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode alt_ctrl_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(0, 0),
    [KS_TWO]          = KC(0, 0),
    [KS_THREE]        = KC(0, 0),
    [KS_FOUR]         = KC(0, 0),
    [KS_FIVE]         = KC(0, 0),
    [KS_SIX]          = KC(0, 0),
    [KS_SEVEN]        = KC(0, 0),
    [KS_EIGHT]        = KC(0, 0),
    [KS_NINE]         = KC(0, 0),
    [KS_ZERO]         = KC(0, 0),
    [KS_MINUS]        = KC(KT_REG, 0x1F),
    [KS_EQUALS]       = KC(KT_REG, 0),
    [KS_BACKSPACE]    = KC(KT_REG, '\b'),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_REG, 0x11),
    [KS_W]            = KC(KT_REG, 0x17),
    [KS_E]            = KC(KT_REG, 0x05),
    [KS_R]            = KC(KT_REG, 0x12),
    [KS_T]            = KC(KT_REG, 0x14),
    [KS_Y]            = KC(KT_REG, 0x19),
    [KS_U]            = KC(KT_REG, 0x15),
    [KS_I]            = KC(KT_REG, 0x09),
    [KS_O]            = KC(KT_REG, 0x0F),
    [KS_P]            = KC(KT_REG, 0x10),
    [KS_LEFT_BRACE]   = KC(KT_REG, 0x1B),
    [KS_RIGHT_BRACE]  = KC(KT_REG, 0x1D),
    [KS_ENTER]        = KC(KT_REG, 0x0D),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_REG, 0x01),
    [KS_S]            = KC(KT_REG, 0x13),
    [KS_D]            = KC(KT_REG, 0x04),
    [KS_F]            = KC(KT_REG, 0x06),
    [KS_G]            = KC(KT_REG, 0x07),
    [KS_H]            = KC(KT_REG, 0x08),
    [KS_J]            = KC(KT_REG, 0x0A),
    [KS_K]            = KC(KT_REG, 0x0B),
    [KS_L]            = KC(KT_REG, 0x0C),
    [KS_SEMICOLON]    = KC(KT_REG, 0),
    [KS_SINGLE_QUOTE] = KC(KT_REG, 0),
    [KS_BACKTICK]     = KC(KT_REG, 0),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, 0x1C),
    [KS_Z]            = KC(KT_REG, 0x1A),
    [KS_X]            = KC(KT_REG, 0x18),
    [KS_C]            = KC(KT_REG, 0x03),
    [KS_V]            = KC(KT_REG, 0x16),
    [KS_B]            = KC(KT_REG, 0x02),
    [KS_N]            = KC(KT_REG, 0x0E),
    [KS_M]            = KC(KT_REG, 0x0D),
    [KS_COMMA]        = KC(KT_REG, 0),
    [KS_PERIOD]       = KC(KT_REG, 0),
    [KS_SLASH]        = KC(KT_REG, 0),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),
    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

static struct keycode alt_shift_ctrl_map[256] = {
    [KS_NULL]         = KC(0, 0),
    [KS_ESC]          = KC(KT_REG, ESC),
    [KS_ONE]          = KC(KT_REG, '!'),
    [KS_TWO]          = KC(KT_REG, '@'),
    [KS_THREE]        = KC(KT_REG, '#'),
    [KS_FOUR]         = KC(KT_REG, '$'),
    [KS_FIVE]         = KC(KT_REG, '%'),
    [KS_SIX]          = KC(KT_REG, '^'),
    [KS_SEVEN]        = KC(KT_REG, '&'),
    [KS_EIGHT]        = KC(KT_REG, '*'),
    [KS_NINE]         = KC(KT_REG, '('),
    [KS_ZERO]         = KC(KT_REG, ')'),
    [KS_MINUS]        = KC(KT_REG, '_'),
    [KS_EQUALS]       = KC(KT_REG, '+'),
    [KS_BACKSPACE]    = KC(KT_REG, DEL),
    [KS_TAB]          = KC(0, 0),
    [KS_MINUS]        = KC(KT_REG, 0x1F),
    [KS_EQUALS]       = KC(KT_REG, 0),
    [KS_BACKSPACE]    = KC(KT_REG, '\b'),
    [KS_TAB]          = KC(0, 0),
    [KS_Q]            = KC(KT_REG, 0x11),
    [KS_W]            = KC(KT_REG, 0x17),
    [KS_E]            = KC(KT_REG, 0x05),
    [KS_R]            = KC(KT_REG, 0x12),
    [KS_T]            = KC(KT_REG, 0x14),
    [KS_Y]            = KC(KT_REG, 0x19),
    [KS_U]            = KC(KT_REG, 0x15),
    [KS_I]            = KC(KT_REG, 0x09),
    [KS_O]            = KC(KT_REG, 0x0F),
    [KS_P]            = KC(KT_REG, 0x10),
    [KS_LEFT_BRACE]   = KC(KT_REG, 0x1B),
    [KS_RIGHT_BRACE]  = KC(KT_REG, 0x1D),
    [KS_ENTER]        = KC(KT_REG, 0x0D),
    [KS_LCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_A]            = KC(KT_REG, 0x01),
    [KS_S]            = KC(KT_REG, 0x13),
    [KS_D]            = KC(KT_REG, 0x04),
    [KS_F]            = KC(KT_REG, 0x06),
    [KS_G]            = KC(KT_REG, 0x07),
    [KS_H]            = KC(KT_REG, 0x08),
    [KS_J]            = KC(KT_REG, 0x0A),
    [KS_K]            = KC(KT_REG, 0x0B),
    [KS_L]            = KC(KT_REG, 0x0C),
    [KS_SEMICOLON]    = KC(KT_REG, ':'),
    [KS_SINGLE_QUOTE] = KC(KT_REG, '"'),
    [KS_BACKTICK]     = KC(KT_REG, '~'),
    [KS_LSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_BACKSLASH]    = KC(KT_REG, 0x1C),
    [KS_Z]            = KC(KT_REG, 0x1A),
    [KS_X]            = KC(KT_REG, 0x18),
    [KS_C]            = KC(KT_REG, 0x03),
    [KS_V]            = KC(KT_REG, 0x16),
    [KS_B]            = KC(KT_REG, 0x02),
    [KS_N]            = KC(KT_REG, 0x0E),
    [KS_M]            = KC(KT_REG, 0x0D),
    [KS_COMMA]        = KC(KT_REG, '<'),
    [KS_PERIOD]       = KC(KT_REG, '>'),
    [KS_SLASH]        = KC(KT_REG, '?'),
    [KS_RSHIFT]       = KC(KT_MOD, KEY_MOD_SHIFT),
    [KS_KP_MULTIPLY]  = KC(0, 0),
    [KS_ALT]          = KC(KT_MOD, KEY_MOD_ALT),
    [KS_SPACE]        = KC(KT_REG, ' '),
    [KS_CAPS_LOCK]    = KC(KT_LED_KEY, KEY_LED_CAPSLOCK),
    [KS_F1]           = KC(KT_STR, KEY_STR_F1),
    [KS_F2]           = KC(KT_STR, KEY_STR_F2),
    [KS_F3]           = KC(KT_STR, KEY_STR_F3),
    [KS_F4]           = KC(KT_STR, KEY_STR_F4),
    [KS_F5]           = KC(KT_STR, KEY_STR_F5),
    [KS_F6]           = KC(KT_STR, KEY_STR_F6),
    [KS_F7]           = KC(KT_STR, KEY_STR_F7),
    [KS_F8]           = KC(KT_STR, KEY_STR_F8),
    [KS_F9]           = KC(KT_STR, KEY_STR_F9),
    [KS_F10]          = KC(KT_STR, KEY_STR_F10),
    [KS_F11]          = KC(KT_STR, KEY_STR_F11),
    [KS_F12]          = KC(KT_STR, KEY_STR_F12),
    [KS_NUM_LOCK]     = KC(KT_LED_KEY, KEY_LED_NUMLOCK),
    [KS_SCROLL_LOCK]  = KC(KT_LED_KEY, KEY_LED_SCROLLLOCK),
    [KS_KP_SEVEN]     = KC(KT_PAD, KEY_PAD_SEVEN),
    [KS_KP_EIGHT]     = KC(KT_PAD, KEY_PAD_EIGHT),
    [KS_KP_NINE]      = KC(KT_PAD, KEY_PAD_NINE),
    [KS_KP_MINUS]     = KC(KT_PAD, KEY_PAD_MINUS),
    [KS_KP_FOUR]      = KC(KT_PAD, KEY_PAD_FOUR),
    [KS_KP_FIVE]      = KC(KT_PAD, KEY_PAD_FIVE),
    [KS_KP_SIX]       = KC(KT_PAD, KEY_PAD_SIX),
    [KS_KP_PLUS]      = KC(KT_PAD, KEY_PAD_PLUS),
    [KS_KP_ONE]       = KC(KT_PAD, KEY_PAD_ONE),
    [KS_KP_TWO]       = KC(KT_PAD, KEY_PAD_TWO),
    [KS_KP_THREE]     = KC(KT_PAD, KEY_PAD_THREE),
    [KS_KP_ZERO]      = KC(KT_PAD, KEY_PAD_ZERO),
    [KS_KP_PERIOD]    = KC(KT_PAD, KEY_PAD_PERIOD),

    [KS_KP_ENTER]     = KC(KT_PAD, KEY_PAD_ENTER),
    [KS_RCTRL]        = KC(KT_MOD, KEY_MOD_CTRL),
    [KS_KP_SLASH]     = KC(KT_PAD, KEY_PAD_SLASH),
    [KS_PRINT_SCREEN] = KC(0, 0),
    [KS_RALT]         = KC(KT_MOD, KEY_MOD_ALT),
    [KS_BREAK]        = KC(0, 0),
    [KS_HOME]         = KC(KT_STR, KEY_STR_HOME),
    [KS_UP]           = KC(KT_CURSOR, KEY_CUR_UP),
    [KS_PAGE_UP]      = KC(KT_STR, KEY_STR_PAGE_UP),
    [KS_LEFT]         = KC(KT_CURSOR, KEY_CUR_LEFT),
    [KS_RIGHT]        = KC(KT_CURSOR, KEY_CUR_RIGHT),
    [KS_END]          = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_DOWN]         = KC(KT_CURSOR, KEY_CUR_DOWN),
    [KS_PAGE_DOWN]    = KC(KT_STR, KEY_STR_PAGE_DOWN),
    [KS_INSERT]       = KC(KT_STR, KEY_STR_INSERT),
    [KS_DELETE]       = KC(KT_STR, KEY_STR_DELETE),
};

struct keycode *keycode_maps[8] = {
    [0]                                                   = reg_map,
    [F(KEY_MOD_SHIFT)]                                    = shift_map,
    [F(KEY_MOD_CTRL)]                                     = ctrl_map,
    [F(KEY_MOD_CTRL) | F(KEY_MOD_SHIFT)]                  = shift_ctrl_map,
    [F(KEY_MOD_ALT)]                                      = alt_map,
    [F(KEY_MOD_ALT) | F(KEY_MOD_SHIFT)]                   = alt_shift_map,
    [F(KEY_MOD_ALT) | F(KEY_MOD_CTRL)]                    = alt_ctrl_map,
    [F(KEY_MOD_ALT) | F(KEY_MOD_CTRL) | F(KEY_MOD_SHIFT)] = alt_shift_ctrl_map,
};


